2025-11-01 15:35:09,586 - INFO - 项目基础目录: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0
2025-11-01 15:35:09,587 - INFO - 开始文件迁移...
2025-11-01 15:35:09,587 - INFO - 迁移配置: {'uploads': {'source': 'd:\\基于IPv6的AI智能学习伴侣导师\\基于IPv6的AI智能学习伴侣导师8.0\\uploads', 'destination': '/root/files/uploads'}, 'cloud_disk': {'source': 'd:\\基于IPv6的AI智能学习伴侣导师\\基于IPv6的AI智能学习伴侣导师8.0\\cloud_disk', 'destination': '/root/files/cloud_disk'}, 'py_uploads': {'source': 'd:\\基于IPv6的AI智能学习伴侣导师\\基于IPv6的AI智能学习伴侣导师8.0\\py\\uploads', 'destination': '/root/files/uploads'}}
2025-11-01 15:35:09,587 - INFO - 
开始迁移 uploads...
2025-11-01 15:35:09,588 - INFO - 源路径: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\uploads
2025-11-01 15:35:09,588 - INFO - 目标路径: /root/files/uploads
2025-11-01 15:35:09,589 - INFO - 确保目录存在: /root/files/uploads
2025-11-01 15:35:09,589 - INFO - 确保目录存在: /root/files/uploads\
2025-11-01 15:35:09,591 - INFO - 确保目录存在: /root/files/uploads\user_12
2025-11-01 15:35:09,597 - INFO - 成功复制文件: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\uploads\user_12\user_12_20251020_123029_0fa48788.jpg -> /root/files/uploads\user_12\user_12_20251020_123029_0fa48788.jpg
2025-11-01 15:35:09,605 - INFO - 成功复制文件: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\uploads\user_12\user_12_20251020_123029_b1b81157.jpg -> /root/files/uploads\user_12\user_12_20251020_123029_b1b81157.jpg
2025-11-01 15:35:09,606 - INFO - 确保目录存在: /root/files/uploads\user_15
2025-11-01 15:35:09,609 - INFO - 成功复制文件: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\uploads\user_15\user_15_20251024_175419_b95a389d.docx -> /root/files/uploads\user_15\user_15_20251024_175419_b95a389d.docx
2025-11-01 15:35:09,609 - INFO - 确保目录存在: /root/files/uploads\user_21
2025-11-01 15:35:09,614 - INFO - 成功复制文件: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\uploads\user_21\user_21_20251028_101037_259adab5.jpg -> /root/files/uploads\user_21\user_21_20251028_101037_259adab5.jpg
2025-11-01 15:35:09,614 - INFO - uploads 迁移完成 - 总计: 4, 成功: 4
2025-11-01 15:35:09,615 - INFO - 
开始迁移 cloud_disk...
2025-11-01 15:35:09,615 - INFO - 源路径: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\cloud_disk
2025-11-01 15:35:09,615 - INFO - 目标路径: /root/files/cloud_disk
2025-11-01 15:35:09,615 - WARNING - 源目录不存在: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\cloud_disk
2025-11-01 15:35:09,616 - INFO - cloud_disk 迁移完成 - 总计: 0, 成功: 0
2025-11-01 15:35:09,616 - INFO - 
开始迁移 py_uploads...
2025-11-01 15:35:09,616 - INFO - 源路径: d:\基于IPv6的AI智能学习伴侣导师\基于IPv6的AI智能学习伴侣导师8.0\py\uploads
2025-11-01 15:35:09,616 - INFO - 目标路径: /root/files/uploads
2025-11-01 15:35:09,617 - INFO - 确保目录存在: /root/files/uploads
2025-11-01 15:35:09,617 - INFO - 确保目录存在: /root/files/uploads\
2025-11-01 15:35:09,619 - INFO - 确保目录存在: /root/files/uploads\user_17
2025-11-01 15:35:09,620 - INFO - py_uploads 迁移完成 - 总计: 0, 成功: 0
2025-11-01 15:35:09,620 - INFO - 
================================================================================
2025-11-01 15:35:09,620 - INFO - 文件迁移摘要:
2025-11-01 15:35:09,620 - INFO - 总文件数: 4
2025-11-01 15:35:09,620 - INFO - 成功迁移: 4
2025-11-01 15:35:09,621 - INFO - 迁移成功率: 100.00%
2025-11-01 15:35:09,621 - INFO - ================================================================================
2025-11-01 15:35:09,621 - WARNING - ================================================================================
2025-11-01 15:35:09,621 - WARNING - 注意: 数据库中的文件路径引用可能需要更新！
2025-11-01 15:35:09,621 - WARNING - 如果数据库中存储了文件的完整路径，需要执行SQL更新操作。
2025-11-01 15:35:09,622 - WARNING - 例如:
2025-11-01 15:35:09,622 - WARNING - UPDATE files SET save_path = REPLACE(save_path, 'uploads/', '/root/files/uploads/');
2025-11-01 15:35:09,622 - WARNING - UPDATE files SET save_path = REPLACE(save_path, 'cloud_disk/', '/root/files/cloud_disk/');
2025-11-01 15:35:09,622 - WARNING - 请根据实际数据库结构调整SQL语句。
2025-11-01 15:35:09,622 - WARNING - ================================================================================
2025-11-01 15:35:09,623 - INFO - 
请确保设置正确的目录权限:
2025-11-01 15:35:09,623 - INFO - sudo chown -R <app_user>:<app_group> /root/files
2025-11-01 15:35:09,623 - INFO - sudo chmod -R 755 /root/files
2025-11-01 15:35:09,623 - INFO - 其中 <app_user> 是运行应用的用户
2025-11-01 15:35:09,623 - INFO - 
文件迁移脚本执行完成！
